<?xml version="1.0" encoding="UTF-8"?>
<model modelUID="r:4c7c0ee1-6161-431d-9fce-e058e23a57e6(med.quantities.generator.template.main@generator)">
  <persistence version="3" />
  <refactoringHistory />
  <language namespace="f3061a53-9226-4cc5-a443-f952ceaf5816(jetbrains.mps.baseLanguage)" />
  <language namespace="3a8b8671-1532-4e8f-b780-594a27fa10c8(med.core)" />
  <language namespace="b401a680-8325-4110-8fd3-84331ff25bef(jetbrains.mps.lang.generator)" />
  <language namespace="ceab5195-25ea-4f22-9b92-103b95ca8c0c(jetbrains.mps.lang.core)" />
  <language namespace="7a5dda62-9140-4668-ab76-d5ed1746f2b2(jetbrains.mps.lang.typesystem)" />
  <language namespace="d7706f63-9be2-479c-a3da-ae92af1e64d5(jetbrains.mps.lang.generator.generationContext)" />
  <language namespace="83888646-71ce-4f1c-9c53-c54016f6ad4f(jetbrains.mps.baseLanguage.collections)" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902c1(jetbrains.mps.baseLanguage.constraints)" version="83" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590292(jetbrains.mps.lang.structure.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902fb(jetbrains.mps.lang.smodel.constraints)" version="21" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590334(jetbrains.mps.baseLanguage.closures.constraints)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590338(jetbrains.mps.baseLanguage.closures.structure)" version="3" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590283(jetbrains.mps.lang.core.constraints)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590288(jetbrains.mps.lang.core.structure)" version="0" />
  <languageAspect modelUID="r:ec9ea141-672c-4923-8a2a-dd6bf5b26fa2(med.core.structure)" version="9" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959028c(jetbrains.mps.lang.structure.constraints)" version="11" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590301(jetbrains.mps.lang.smodel.structure)" version="16" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902db(jetbrains.mps.baseLanguage.blTypes.constraints)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902e2(jetbrains.mps.lang.generator.constraints)" version="16" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902f3(jetbrains.mps.lang.generator.generationContext.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902bc(jetbrains.mps.lang.sharedConcepts.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902e8(jetbrains.mps.lang.generator.structure)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902ba(jetbrains.mps.lang.sharedConcepts.constraints)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902ca(jetbrains.mps.baseLanguage.structure)" version="3" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902ae(jetbrains.mps.lang.typesystem.constraints)" version="17" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c895902b4(jetbrains.mps.lang.typesystem.structure)" version="3" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959033d(jetbrains.mps.lang.annotations.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959034b(jetbrains.mps.lang.quotation.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c8959032e(jetbrains.mps.baseLanguage.collections.structure)" version="7" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590328(jetbrains.mps.baseLanguage.collections.constraints)" version="6" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590345(jetbrains.mps.lang.pattern.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590340(jetbrains.mps.lang.pattern.constraints)" version="2" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590575(jetbrains.mps.gtext.structure)" version="0" />
  <languageAspect modelUID="r:00000000-0000-4000-0000-011c89590571(jetbrains.mps.gtext.constraints)" version="8" />
  <languageAspect modelUID="r:9f9959ae-ed4b-4339-a71e-62a180fa22ec(med.base.structure)" version="2" />
  <languageAspect modelUID="r:c8eeaafc-b8ed-41eb-96aa-711dbd66c11c(med.quantities.structure)" version="0" />
  <devkit namespace="2677cb18-f558-4e33-bc38-a5139cee06dc(jetbrains.mps.devkit.language-design)" />
  <maxImportIndex value="6" />
  <import index="1" modelUID="r:c8eeaafc-b8ed-41eb-96aa-711dbd66c11c(med.quantities.structure)" version="0" />
  <import index="3" modelUID="r:c85eba1a-13d7-4e26-acd6-1b7f335303be(med.quantities.behavior)" version="-1" />
  <import index="4" modelUID="f:java_stub#java.lang(java.lang@java_stub)" version="-1" />
  <import index="5" modelUID="f:java_stub#java.io(java.io@java_stub)" version="-1" />
  <import index="6" modelUID="r:14a060e8-2002-4063-9ac2-3317a0d2c940(med.core.behavior)" version="-1" />
  <visible index="2" modelUID="r:ec9ea141-672c-4923-8a2a-dd6bf5b26fa2(med.core.structure)" />
  <node type="jetbrains.mps.lang.generator.structure.MappingConfiguration" id="5580581899346360875">
    <property name="name" value="main" />
    <property name="topPriorityGroup" value="false" />
    <node role="mappingLabel" type="jetbrains.mps.lang.generator.structure.MappingLabelDeclaration" id="7530832320799568947">
      <property name="name" value="indexVar" />
      <link role="sourceConcept" targetNodeId="2v.6254144863184087909" resolveInfo="ModuleVariable" />
      <link role="targetConcept" targetNodeId="2v.6254144863184087909" resolveInfo="ModuleVariable" />
    </node>
    <node role="mappingLabel" type="jetbrains.mps.lang.generator.structure.MappingLabelDeclaration" id="7530832320798912195">
      <property name="name" value="historyVar" />
      <link role="sourceConcept" targetNodeId="2v.6254144863184087909" resolveInfo="ModuleVariable" />
      <link role="targetConcept" targetNodeId="2v.6254144863184087909" resolveInfo="ModuleVariable" />
    </node>
    <node role="weavingMappingRule" type="jetbrains.mps.lang.generator.structure.Weaving_MappingRule" id="8017791897009937021">
      <link role="applicableConcept" targetNodeId="2v.6254144863184087909" resolveInfo="ModuleVariable" />
      <node role="contextNodeQuery" type="jetbrains.mps.lang.generator.structure.Weaving_MappingRule_ContextNodeQuery" id="8017791897009937023">
        <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="8017791897009937024">
          <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="7530832320799568810">
            <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799568811">
              <node role="operand" type="jetbrains.mps.lang.generator.generationContext.structure.TemplateFunctionParameter_generationContext" id="7530832320799568812" />
              <node role="operation" type="jetbrains.mps.lang.generator.generationContext.structure.GenerationContextOp_GetCopiedOutputByInput" id="7530832320799568813">
                <node role="inputNode" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799568814">
                  <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="7530832320799568815" />
                  <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="7530832320799568816">
                    <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="7530832320799568817">
                      <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="7530832320799568818">
                        <link role="conceptDeclaration" targetNodeId="2v.306587673255505547" resolveInfo="ImplementationModule" />
                      </node>
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="conditionFunction" type="jetbrains.mps.lang.generator.structure.BaseMappingRule_Condition" id="8017791897009937025">
        <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="8017791897009937026">
          <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="7530832320799566625">
            <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799566626">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799566627">
                <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="7530832320799566628" />
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="7530832320799566629">
                  <link role="link" targetNodeId="2v.4271434180064590876" />
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsInstanceOfOperation" id="7530832320799566630">
                <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="7530832320799566631">
                  <link role="conceptDeclaration" targetNodeId="1.8017791897008984431" resolveInfo="AveragingType" />
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="ruleConsequence" type="jetbrains.mps.lang.generator.structure.TemplateDeclarationReference" id="8017791897009937048">
        <link role="template" targetNodeId="8017791897009937046" resolveInfo="weave_ModuleVariable" />
      </node>
    </node>
    <node role="weavingMappingRule" type="jetbrains.mps.lang.generator.structure.Weaving_MappingRule" id="7530832320799568823">
      <link role="applicableConcept" targetNodeId="2v.6254144863184087909" resolveInfo="ModuleVariable" />
      <node role="contextNodeQuery" type="jetbrains.mps.lang.generator.structure.Weaving_MappingRule_ContextNodeQuery" id="7530832320799568824">
        <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="7530832320799568825">
          <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="7530832320799568826">
            <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799568827">
              <node role="operand" type="jetbrains.mps.lang.generator.generationContext.structure.TemplateFunctionParameter_generationContext" id="7530832320799568828" />
              <node role="operation" type="jetbrains.mps.lang.generator.generationContext.structure.GenerationContextOp_GetCopiedOutputByInput" id="7530832320799568829">
                <node role="inputNode" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799568830">
                  <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="7530832320799568831" />
                  <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_GetAncestorOperation" id="7530832320799568832">
                    <node role="parameter" type="jetbrains.mps.lang.smodel.structure.OperationParm_Concept" id="7530832320799568833">
                      <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="7530832320799568834">
                        <link role="conceptDeclaration" targetNodeId="2v.306587673255505547" resolveInfo="ImplementationModule" />
                      </node>
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="conditionFunction" type="jetbrains.mps.lang.generator.structure.BaseMappingRule_Condition" id="7530832320799568835">
        <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="7530832320799568836">
          <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="7530832320799568837">
            <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799568838">
              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799568839">
                <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="7530832320799568840" />
                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="7530832320799568841">
                  <link role="link" targetNodeId="2v.4271434180064590876" />
                </node>
              </node>
              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_IsInstanceOfOperation" id="7530832320799568842">
                <node role="conceptArgument" type="jetbrains.mps.lang.smodel.structure.RefConcept_Reference" id="7530832320799568843">
                  <link role="conceptDeclaration" targetNodeId="1.8017791897008984431" resolveInfo="AveragingType" />
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
      <node role="ruleConsequence" type="jetbrains.mps.lang.generator.structure.TemplateDeclarationReference" id="7530832320799568853">
        <link role="template" targetNodeId="7530832320799568850" resolveInfo="weave_ModuleVariable" />
      </node>
    </node>
    <node role="reductionMappingRule" type="jetbrains.mps.lang.generator.structure.Reduction_MappingRule" id="7530832320798598565">
      <link role="applicableConcept" targetNodeId="1.8017791897009806155" resolveInfo="AveragingAssignmentStatement" />
      <node role="ruleConsequence" type="jetbrains.mps.lang.generator.structure.TemplateDeclarationReference" id="7530832320798600747">
        <link role="template" targetNodeId="7530832320798600745" resolveInfo="reduce_AveragingAssignmentStatement" />
      </node>
    </node>
    <node role="reductionMappingRule" type="jetbrains.mps.lang.generator.structure.Reduction_MappingRule" id="8017791897009597259">
      <link role="applicableConcept" targetNodeId="1.8017791897008984431" resolveInfo="AveragingType" />
      <node role="ruleConsequence" type="jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence" id="8017791897009599439">
        <node role="templateNode" type="med.core.structure.Int8" id="8017791897009599441">
          <node role="nodeMacro$attribute" type="jetbrains.mps.lang.generator.structure.CopySrcNodeMacro" id="8017791897009599443">
            <node role="sourceNodeQuery" type="jetbrains.mps.lang.generator.structure.SourceSubstituteMacro_SourceNodeQuery" id="8017791897009599444">
              <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="8017791897009599445">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="8017791897009599446">
                  <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="8017791897009599448">
                    <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="8017791897009599447" />
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="8017791897009599452">
                      <link role="link" targetNodeId="1.8017791897009273674" />
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="reductionMappingRule" type="jetbrains.mps.lang.generator.structure.Reduction_MappingRule" id="5580581899346360876">
      <link role="applicableConcept" targetNodeId="1.3456749490051670916" resolveInfo="QuantityDeclaration" />
      <node role="ruleConsequence" type="jetbrains.mps.lang.generator.structure.AbandonInput_RuleConsequence" id="5580581899346369418" />
    </node>
    <node role="reductionMappingRule" type="jetbrains.mps.lang.generator.structure.Reduction_MappingRule" id="5580581899346461422">
      <link role="applicableConcept" targetNodeId="1.3456749490051894748" resolveInfo="QuantityType" />
      <node role="ruleConsequence" type="jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence" id="5580581899346461424">
        <node role="templateNode" type="med.core.structure.GenericIntegerType" id="5580581899347007482" />
      </node>
    </node>
    <node role="reductionMappingRule" type="jetbrains.mps.lang.generator.structure.Reduction_MappingRule" id="5580581899346470376">
      <link role="applicableConcept" targetNodeId="1.3456749490052912788" resolveInfo="MarkAsInternalOperator" />
      <node role="ruleConsequence" type="jetbrains.mps.lang.generator.structure.InlineTemplate_RuleConsequence" id="5580581899346470378">
        <node role="templateNode" type="med.core.structure.IntConstantExpression" id="5580581899346470380">
          <property name="value" value="12" />
          <node role="propertyMacro$property_attribute$value" type="jetbrains.mps.lang.generator.structure.PropertyMacro" id="5580581899346470381">
            <node role="propertyValueFunction" type="jetbrains.mps.lang.generator.structure.PropertyMacro_GetPropertyValue" id="5580581899346470384">
              <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="5580581899346470385">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="5580581899346470386">
                  <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="5580581899346470387">
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.SPropertyAccess" id="5580581899346470388">
                      <link role="property" targetNodeId="1.3456749490052912789" resolveInfo="value" />
                    </node>
                    <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="5580581899346470389" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
    <node role="reductionMappingRule" type="jetbrains.mps.lang.generator.structure.Reduction_MappingRule" id="5580581899346470390">
      <link role="applicableConcept" targetNodeId="1.3456749490052512365" resolveInfo="MarkAsPhysicalOperator" />
      <node role="ruleConsequence" type="jetbrains.mps.lang.generator.structure.TemplateDeclarationReference" id="5580581899346470422">
        <link role="template" targetNodeId="5580581899346470420" resolveInfo="reduce_MarkAsPhysicalOperator" />
      </node>
    </node>
  </node>
  <node type="jetbrains.mps.lang.generator.structure.TemplateDeclaration" id="5580581899346470420">
    <property name="name" value="reduce_MarkAsPhysicalOperator" />
    <property name="package" value="quantities" />
    <link role="applicableConcept" targetNodeId="1.3456749490052512365" resolveInfo="MarkAsPhysicalOperator" />
    <node role="contentNode" type="med.core.structure.AssignmentStatement" id="5580581899346470432">
      <node role="lvalue" type="med.core.structure.ILValue" id="5580581899346470433" />
      <node role="rvalue" type="med.core.structure.MultiplicationExpression" id="5580581899346605397">
        <node role="left" type="med.core.structure.IntConstantExpression" id="5580581899346605401">
          <property name="value" value="100" />
          <node role="propertyMacro$property_attribute$value" type="jetbrains.mps.lang.generator.structure.PropertyMacro" id="5580581899346605402">
            <node role="propertyValueFunction" type="jetbrains.mps.lang.generator.structure.PropertyMacro_GetPropertyValue" id="5580581899346605405">
              <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="5580581899346605406">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="5580581899346605407">
                  <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="5580581899346605408">
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.SPropertyAccess" id="5580581899346605409">
                      <link role="property" targetNodeId="1.3456749490052512379" resolveInfo="value" />
                    </node>
                    <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="5580581899346605410" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="templateFragment$attribute" type="jetbrains.mps.lang.generator.structure.TemplateFragment" id="5580581899346605400" />
        <node role="right" type="med.core.structure.IntConstantExpression" id="5580581899346605412">
          <property name="value" value="42" />
          <node role="propertyMacro$property_attribute$value" type="jetbrains.mps.lang.generator.structure.PropertyMacro" id="5580581899346605413">
            <node role="propertyValueFunction" type="jetbrains.mps.lang.generator.structure.PropertyMacro_GetPropertyValue" id="5580581899346605416">
              <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="5580581899346605417">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="5580581899346605418">
                  <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="5580581899346605419">
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_ConceptMethodCall" id="5580581899346605453">
                      <link role="baseMethodDeclaration" targetNodeId="3.5580581899346605426" resolveInfo="scalingFactor" />
                    </node>
                    <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="5580581899346605421" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
  </node>
  <visible index="3" modelUID="r:00000000-0000-4000-0000-011c89590288(jetbrains.mps.lang.core.structure)" />
  <node type="jetbrains.mps.lang.generator.structure.TemplateDeclaration" id="8017791897009937046">
    <property name="name" value="weave_ModuleVariableHistoryArray" />
    <link role="applicableConcept" targetNodeId="2v.6254144863184087909" resolveInfo="ModuleVariable" />
    <node role="contentNode" type="med.core.structure.ImplementationModule" id="8017791897009937049">
      <property name="name" value="m" />
      <node role="contents" type="med.core.structure.ModuleVariable" id="8017791897010383468">
        <property name="name" value="history" />
        <node role="type" type="med.core.structure.SizedArrayType" id="8017791897010383469">
          <property name="arraySize" value="1" />
          <node role="elementType" type="med.core.structure.GenericIntegerType" id="8017791897010383470">
            <node role="nodeMacro$attribute" type="jetbrains.mps.lang.generator.structure.CopySrcNodeMacro" id="8017791897010383471">
              <node role="sourceNodeQuery" type="jetbrains.mps.lang.generator.structure.SourceSubstituteMacro_SourceNodeQuery" id="8017791897010383472">
                <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="8017791897010383473">
                  <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="8017791897010383474">
                    <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="8017791897010383475">
                      <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="8017791897010383476" />
                      <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="8017791897010383477">
                        <link role="link" targetNodeId="2v.4271434180064590876" />
                      </node>
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
          <node role="propertyMacro$property_attribute$arraySize" type="jetbrains.mps.lang.generator.structure.PropertyMacro" id="8017791897010383478">
            <node role="propertyValueFunction" type="jetbrains.mps.lang.generator.structure.PropertyMacro_GetPropertyValue" id="8017791897010383479">
              <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="8017791897010383480">
                <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="8017791897010383481">
                  <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="8017791897010383482">
                    <node role="operand" type="jetbrains.mps.lang.smodel.structure.SNodeTypeCastExpression" id="8017791897010383483">
                      <link role="concept" targetNodeId="1.8017791897008984431" resolveInfo="AveragingType" />
                      <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="8017791897010383484">
                        <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="8017791897010383485" />
                        <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="8017791897010383486">
                          <link role="link" targetNodeId="2v.4271434180064590876" />
                        </node>
                      </node>
                    </node>
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.SPropertyAccess" id="8017791897010383487">
                      <link role="property" targetNodeId="1.8017791897008984434" resolveInfo="size" />
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="templateFragment$attribute" type="jetbrains.mps.lang.generator.structure.TemplateFragment" id="8017791897010383488">
          <link role="labelDeclaration" targetNodeId="7530832320798912195" resolveInfo="historyVar" />
        </node>
        <node role="propertyMacro$property_attribute$name" type="jetbrains.mps.lang.generator.structure.PropertyMacro" id="8017791897010383489">
          <node role="propertyValueFunction" type="jetbrains.mps.lang.generator.structure.PropertyMacro_GetPropertyValue" id="8017791897010383490">
            <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="8017791897010383491">
              <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="8017791897010383492">
                <node role="expression" type="jetbrains.mps.baseLanguage.structure.PlusExpression" id="8017791897010383493">
                  <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="8017791897010383494">
                    <property name="value" value="_history" />
                  </node>
                  <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="8017791897010383495">
                    <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="8017791897010383496" />
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.SPropertyAccess" id="8017791897010383497">
                      <link role="property" targetNodeId="3v.1169194664001" resolveInfo="name" />
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="init" type="med.core.structure.ArrayLiteral" id="5019031344944456802">
          <node role="elements" type="med.core.structure.IntConstantExpression" id="5019031344944456804">
            <property name="value" value="10" />
            <node role="nodeMacro$attribute" type="jetbrains.mps.lang.generator.structure.LoopMacro" id="5019031344944456817">
              <node role="sourceNodesQuery" type="jetbrains.mps.lang.generator.structure.SourceSubstituteMacro_SourceNodesQuery" id="5019031344944456818">
                <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="5019031344944456819">
                  <node role="statement" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclarationStatement" id="5019031344944456835">
                    <node role="localVariableDeclaration" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="5019031344944456836">
                      <property name="name" value="ex" />
                      <node role="type" type="jetbrains.mps.lang.smodel.structure.SNodeListType" id="5019031344944456837">
                        <link role="elementConcept" targetNodeId="2v.6441851857096548278" resolveInfo="Expression" />
                      </node>
                      <node role="initializer" type="jetbrains.mps.baseLanguage.structure.GenericNewExpression" id="5019031344944456839">
                        <node role="creator" type="jetbrains.mps.lang.smodel.structure.SNodeListCreator" id="5019031344944456840">
                          <node role="createdType" type="jetbrains.mps.lang.smodel.structure.SNodeListType" id="5019031344944456841">
                            <link role="elementConcept" targetNodeId="2v.6441851857096548278" resolveInfo="Expression" />
                          </node>
                        </node>
                      </node>
                    </node>
                  </node>
                  <node role="statement" type="jetbrains.mps.baseLanguage.structure.ForStatement" id="5019031344944456846">
                    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="5019031344944456847">
                      <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="5019031344944456881">
                        <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="5019031344944456883">
                          <node role="operand" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="5019031344944456882">
                            <link role="variableDeclaration" targetNodeId="5019031344944456836" resolveInfo="ex" />
                          </node>
                          <node role="operation" type="jetbrains.mps.baseLanguage.collections.structure.AddElementOperation" id="5019031344944456887">
                            <node role="argument" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="5019031344944456929">
                              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="5019031344944456905">
                                <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="5019031344944456891" />
                                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="5019031344944456911">
                                  <link role="link" targetNodeId="2v.6254144863187085423" />
                                </node>
                              </node>
                              <node role="operation" type="jetbrains.mps.lang.smodel.structure.Node_CopyOperation" id="5019031344944456935" />
                            </node>
                          </node>
                        </node>
                      </node>
                    </node>
                    <node role="variable" type="jetbrains.mps.baseLanguage.structure.LocalVariableDeclaration" id="5019031344944456849">
                      <property name="name" value="i" />
                      <node role="type" type="jetbrains.mps.baseLanguage.structure.IntegerType" id="5019031344944456851" />
                      <node role="initializer" type="jetbrains.mps.baseLanguage.structure.IntegerConstant" id="5019031344944456853">
                        <property name="value" value="0" />
                      </node>
                    </node>
                    <node role="condition" type="jetbrains.mps.baseLanguage.structure.LessThanExpression" id="5019031344944456855">
                      <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="5019031344944456873">
                        <node role="operand" type="jetbrains.mps.lang.smodel.structure.SNodeTypeCastExpression" id="5019031344944456871">
                          <link role="concept" targetNodeId="1.8017791897008984431" resolveInfo="AveragingType" />
                          <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="5019031344944456866">
                            <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="5019031344944456858" />
                            <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="5019031344944456870">
                              <link role="link" targetNodeId="2v.4271434180064590876" />
                            </node>
                          </node>
                        </node>
                        <node role="operation" type="jetbrains.mps.lang.smodel.structure.SPropertyAccess" id="5019031344944456877">
                          <link role="property" targetNodeId="1.8017791897008984434" resolveInfo="size" />
                        </node>
                      </node>
                      <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="5019031344944456854">
                        <link role="variableDeclaration" targetNodeId="5019031344944456849" resolveInfo="i" />
                      </node>
                    </node>
                    <node role="iteration" type="jetbrains.mps.baseLanguage.structure.PostfixIncrementExpression" id="5019031344944456879">
                      <node role="expression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="5019031344944456880">
                        <link role="variableDeclaration" targetNodeId="5019031344944456849" resolveInfo="i" />
                      </node>
                    </node>
                  </node>
                  <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="5019031344944456843">
                    <node role="expression" type="jetbrains.mps.baseLanguage.structure.LocalVariableReference" id="5019031344944456844">
                      <link role="variableDeclaration" targetNodeId="5019031344944456836" resolveInfo="ex" />
                    </node>
                  </node>
                </node>
              </node>
            </node>
            <node role="nodeMacro$attribute" type="jetbrains.mps.lang.generator.structure.CopySrcNodeMacro" id="5019031344944456941">
              <node role="sourceNodeQuery" type="jetbrains.mps.lang.generator.structure.SourceSubstituteMacro_SourceNodeQuery" id="5019031344944456942">
                <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="5019031344944456943">
                  <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="5019031344944456945">
                    <node role="expression" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="5019031344944456946" />
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
  </node>
  <visible index="4" modelUID="r:a1e3bfa1-9c97-41c9-b751-07313ec7e530(med.quantities.rt)" />
  <node type="jetbrains.mps.lang.generator.structure.TemplateDeclaration" id="7530832320798600745">
    <property name="name" value="reduce_AveragingAssignmentStatement" />
    <link role="applicableConcept" targetNodeId="1.8017791897009806155" resolveInfo="AveragingAssignmentStatement" />
    <node role="contentNode" type="med.core.structure.ImplementationModule" id="7530832320798600748">
      <property name="name" value="m" />
      <node role="contents" type="med.core.structure.ModuleVariable" id="7530832320799674247">
        <property name="name" value="idx" />
        <node role="init" type="med.core.structure.Expression" id="7530832320799674248" />
        <node role="type" type="med.core.structure.GenericIntegerType" id="7530832320799674250" />
      </node>
      <node role="contents" type="med.core.structure.ModuleVariable" id="7530832320798600759">
        <property name="name" value="x" />
        <node role="init" type="med.core.structure.Expression" id="7530832320798600760" />
        <node role="type" type="med.core.structure.GenericIntegerType" id="7530832320799018572" />
      </node>
      <node role="contents" type="med.core.structure.ModuleVariable" id="7530832320799016391">
        <property name="name" value="hist" />
        <node role="init" type="med.core.structure.Expression" id="7530832320799016392" />
        <node role="type" type="med.core.structure.PointerType" id="7530832320799018574">
          <node role="baseType" type="med.core.structure.GenericIntegerType" id="7530832320799018573" />
        </node>
      </node>
      <node role="contents" type="med.core.structure.Procedure" id="7530832320798600749">
        <property name="name" value="x" />
        <node role="body" type="med.core.structure.StatementList" id="7530832320798600750">
          <node role="statements" type="med.core.structure.AssignmentStatement" id="7530832320798600753">
            <node role="lvalue" type="med.core.structure.ModuleVariableRef" id="7530832320798600762">
              <link role="variable" targetNodeId="7530832320798600759" resolveInfo="x" />
              <node role="nodeMacro$attribute" type="jetbrains.mps.lang.generator.structure.CopySrcNodeMacro" id="7530832320798702379">
                <node role="sourceNodeQuery" type="jetbrains.mps.lang.generator.structure.SourceSubstituteMacro_SourceNodeQuery" id="7530832320798702382">
                  <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="7530832320798702383">
                    <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="7530832320798702384">
                      <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320798702385">
                        <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="7530832320798702386">
                          <link role="link" targetNodeId="1.8017791897009806157" />
                        </node>
                        <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="7530832320798702387" />
                      </node>
                    </node>
                  </node>
                </node>
              </node>
            </node>
            <node role="templateFragment$attribute" type="jetbrains.mps.lang.generator.structure.TemplateFragment" id="7530832320798600756" />
            <node role="rvalue" type="med.core.structure.ProcedureCall" id="7530832320798739835">
              <link role="procedure" targetNodeId="4v.8017791897009835615" resolveInfo="calcAvgInt" />
              <node role="actuals" type="med.core.structure.ModuleVariableRef" id="7530832320799018576">
                <link role="variable" targetNodeId="7530832320799016391" resolveInfo="hist" />
                <node role="referenceMacro$link_attribute$variable" type="jetbrains.mps.lang.generator.structure.ReferenceMacro" id="7530832320799018581">
                  <node role="referentFunction" type="jetbrains.mps.lang.generator.structure.ReferenceMacro_GetReferent" id="7530832320799018582">
                    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="7530832320799018583">
                      <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="7530832320799018584">
                        <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799018587">
                          <node role="operand" type="jetbrains.mps.lang.generator.generationContext.structure.TemplateFunctionParameter_generationContext" id="7530832320799018586" />
                          <node role="operation" type="jetbrains.mps.lang.generator.generationContext.structure.GenerationContextOp_GetOutputByLabelAndInput" id="7530832320799018591">
                            <link role="label" targetNodeId="7530832320798912195" resolveInfo="historyVar" />
                            <node role="inputNode" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799018599">
                              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799018594">
                                <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="7530832320799018593" />
                                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="7530832320799018598">
                                  <link role="link" targetNodeId="1.8017791897009806157" />
                                </node>
                              </node>
                              <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="7530832320799018603">
                                <link role="link" targetNodeId="2v.6254144863184158274" />
                              </node>
                            </node>
                          </node>
                        </node>
                      </node>
                    </node>
                  </node>
                </node>
              </node>
              <node role="actuals" type="med.core.structure.AddressOfExpression" id="7530832320799674252">
                <node role="expression" type="med.core.structure.ModuleVariableRef" id="7530832320799674251">
                  <link role="variable" targetNodeId="7530832320799674247" resolveInfo="idx" />
                  <node role="referenceMacro$link_attribute$variable" type="jetbrains.mps.lang.generator.structure.ReferenceMacro" id="7530832320799674255">
                    <node role="referentFunction" type="jetbrains.mps.lang.generator.structure.ReferenceMacro_GetReferent" id="7530832320799674256">
                      <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="7530832320799674257">
                        <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="7530832320799674259">
                          <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799674260">
                            <node role="operand" type="jetbrains.mps.lang.generator.generationContext.structure.TemplateFunctionParameter_generationContext" id="7530832320799674261" />
                            <node role="operation" type="jetbrains.mps.lang.generator.generationContext.structure.GenerationContextOp_GetOutputByLabelAndInput" id="7530832320799674262">
                              <link role="label" targetNodeId="7530832320799568947" resolveInfo="indexVar" />
                              <node role="inputNode" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799674263">
                                <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799674264">
                                  <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="7530832320799674265" />
                                  <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="7530832320799674266">
                                    <link role="link" targetNodeId="1.8017791897009806157" />
                                  </node>
                                </node>
                                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="7530832320799674267">
                                  <link role="link" targetNodeId="2v.6254144863184158274" />
                                </node>
                              </node>
                            </node>
                          </node>
                        </node>
                      </node>
                    </node>
                  </node>
                </node>
              </node>
              <node role="actuals" type="med.core.structure.IntConstantExpression" id="7530832320799018578">
                <property name="value" value="10" />
                <node role="nodeMacro$attribute" type="jetbrains.mps.lang.generator.structure.CopySrcNodeMacro" id="7530832320799050347">
                  <node role="sourceNodeQuery" type="jetbrains.mps.lang.generator.structure.SourceSubstituteMacro_SourceNodeQuery" id="7530832320799050350">
                    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="7530832320799050351">
                      <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="7530832320799050352">
                        <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799050353">
                          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="7530832320799050354">
                            <link role="link" targetNodeId="1.8017791897009806156" />
                          </node>
                          <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="7530832320799050355" />
                        </node>
                      </node>
                    </node>
                  </node>
                </node>
              </node>
              <node role="actuals" type="med.core.structure.IntConstantExpression" id="7530832320799018580">
                <property name="value" value="10" />
                <node role="propertyMacro$property_attribute$value" type="jetbrains.mps.lang.generator.structure.PropertyMacro" id="7530832320799050357">
                  <node role="propertyValueFunction" type="jetbrains.mps.lang.generator.structure.PropertyMacro_GetPropertyValue" id="7530832320799050358">
                    <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="7530832320799050359">
                      <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="7530832320799122880">
                        <node role="expression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799122894">
                          <node role="operand" type="jetbrains.mps.lang.smodel.structure.SNodeTypeCastExpression" id="7530832320799122892">
                            <link role="concept" targetNodeId="1.8017791897008984431" resolveInfo="AveragingType" />
                            <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799122887">
                              <node role="operand" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799122882">
                                <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="7530832320799122881" />
                                <node role="operation" type="jetbrains.mps.lang.smodel.structure.SLinkAccess" id="7530832320799122886">
                                  <link role="link" targetNodeId="1.8017791897009806157" />
                                </node>
                              </node>
                              <node role="operation" type="jetbrains.mps.lang.typesystem.structure.Node_TypeOperation" id="7530832320799122891" />
                            </node>
                          </node>
                          <node role="operation" type="jetbrains.mps.lang.smodel.structure.SPropertyAccess" id="7530832320799122898">
                            <link role="property" targetNodeId="1.8017791897008984434" resolveInfo="size" />
                          </node>
                        </node>
                      </node>
                    </node>
                  </node>
                </node>
              </node>
              <node role="moduleDependencyAnnotation$attribute" type="med.core.structure.ModuleDependency" id="7530832320799461479">
                <node role="import" type="med.core.structure.ModuleImport" id="7530832320799463659">
                  <link role="importedModule" targetNodeId="4v.8017791897009835614" resolveInfo="AvgUtil" />
                </node>
              </node>
            </node>
          </node>
        </node>
        <node role="type" type="med.core.structure.VoidType" id="7530832320798600752" />
      </node>
      <node role="imports" type="med.core.structure.ModuleImport" id="7530832320798739833">
        <link role="importedModule" targetNodeId="4v.8017791897009835614" resolveInfo="AvgUtil" />
      </node>
    </node>
  </node>
  <node type="jetbrains.mps.lang.generator.structure.TemplateDeclaration" id="7530832320799568850">
    <property name="name" value="weave_ModuleVariableIndexVar" />
    <link role="applicableConcept" targetNodeId="2v.6254144863184087909" resolveInfo="ModuleVariable" />
    <node role="contentNode" type="med.core.structure.ImplementationModule" id="7530832320799568860">
      <property name="name" value="m" />
      <node role="contents" type="med.core.structure.ModuleVariable" id="7530832320799568941">
        <property name="name" value="index" />
        <node role="init" type="med.core.structure.IntConstantExpression" id="7530832320799568945">
          <property name="value" value="0" />
        </node>
        <node role="type" type="med.core.structure.GenericIntegerType" id="7530832320799568944" />
        <node role="templateFragment$attribute" type="jetbrains.mps.lang.generator.structure.TemplateFragment" id="7530832320799568946">
          <link role="labelDeclaration" targetNodeId="7530832320799568947" resolveInfo="indexVar" />
        </node>
        <node role="propertyMacro$property_attribute$name" type="jetbrains.mps.lang.generator.structure.PropertyMacro" id="7530832320799568948">
          <node role="propertyValueFunction" type="jetbrains.mps.lang.generator.structure.PropertyMacro_GetPropertyValue" id="7530832320799568949">
            <node role="body" type="jetbrains.mps.baseLanguage.structure.StatementList" id="7530832320799568950">
              <node role="statement" type="jetbrains.mps.baseLanguage.structure.ExpressionStatement" id="7530832320799568951">
                <node role="expression" type="jetbrains.mps.baseLanguage.structure.PlusExpression" id="7530832320799568952">
                  <node role="rightExpression" type="jetbrains.mps.baseLanguage.structure.StringLiteral" id="7530832320799568953">
                    <property name="value" value="_index" />
                  </node>
                  <node role="leftExpression" type="jetbrains.mps.baseLanguage.structure.DotExpression" id="7530832320799568954">
                    <node role="operand" type="jetbrains.mps.lang.generator.structure.TemplateFunctionParameter_sourceNode" id="7530832320799568955" />
                    <node role="operation" type="jetbrains.mps.lang.smodel.structure.SPropertyAccess" id="7530832320799568956">
                      <link role="property" targetNodeId="3v.1169194664001" resolveInfo="name" />
                    </node>
                  </node>
                </node>
              </node>
            </node>
          </node>
        </node>
      </node>
    </node>
  </node>
</model>

